@echo off
echo Checking for modules...
go list -m -u all | findstr /V "(latest)"
IF %ERRORLEVEL% NEQ 0 (
    echo All modules up to date.
)

echo.
echo Running vulnerability scan with govulncheck
go install golang.org/x/vuln/cmd/govulncheck@latest
govulncheck ./...

echo.
echo CI check complete. No critical issues found.